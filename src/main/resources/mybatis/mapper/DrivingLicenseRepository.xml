<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.wghtstudio.insurance.dao.repository.DrivingLicenseRepository">
    <insert id="createDrivingLicense" parameterType="DrivingLicense" useGeneratedKeys="true" keyProperty="id"
            keyColumn="id">
        INSERT INTO driving_licenses(url, owner, plate_number, engine, frame, type)
        values (#{url}, #{owner}, #{plateNumber}, #{engine}, #{frame}, #{type})
    </insert>

    <update id="updateDrivingLicense" parameterType="DrivingLicense">
        UPDATE driving_licenses
        <set>
            <if test="url != null">
                url = #{url},
            </if>
            <if test="owner != null">
                owner = #{owner},
            </if>
            <if test="plateNumber != null">
                plate_number = #{plateNumber},
            </if>
            <if test="engine != null">
                engine = #{engine},
            </if>
            <if test="frame != null">
                frame = #{frame},
            </if>
            <if test="type != null">
                type = #{type},
            </if>
            <if test="orderId != null">
                order_id = #{orderId},
            </if>
        </set>
        WHERE id = #{id}
    </update>
    <select id="getDrivingLicenseByPolicyinfo" resultType="DrivingLicense">
        SELECT url, owner, plate_number, engine, frame, type, order_id
        FROM driving_licenses
        <where>
            <if test="plateNumber != null and plateNumber != ''">
                or plate_number=#{plateNumber}
            </if>

            <if test="engine != null and engine != ''">
                or engine=#{engine}
            </if>

            <if test="frame != null and frame != ''">
                orã€€frame=#{frame}
            </if>
        </where>
    </select>
</mapper>
